!function(a,b,c,d){"use strict";a.fn.openToggle=function(b){function c(a){a.hasClass("open")||!a.hasClass("open")&&!a.hasClass("closed")?a.removeClass("open").addClass("closed"):a.removeClass("closed").addClass("open")}function d(){var a=jQuery(this).closest(b.target);c(a),b.callback(a)}return b=a.extend({target:this,handle:".open-toggle-handle",button:".open-toggle-button",callback:function(){}},b),this.delegate(b.button,"click",d).delegate(b.handle,"dblclick",d),this};var e={root:null,sidebar:null,handle:null,closebutton:null,panelcontainer:null,timer:null,data:{},init:function(){this.root=a("html"),this.sidebar=a("#wtaiu"),this.handle=a("#wtaiu-handle"),this.closebutton=a("#wtaiu-close"),this.panelcontainer=a("#wtaiu-data"),d.data&&(this.data=d.data),this.setupContextMenu(),this.setupSortable(),this.setupOpenToggle(),this.setupHelpBoxes(),this.handle.click(function(){e.isOpen()?e.close():e.open(),e.saveData()}),this.closebutton.click(function(){e.killSidebar()}),this.data.open?this.open():this.close(),setTimeout(function(){e.addTransitions()},500)},setupSortable:function(){this.panelcontainer.sortable({handle:".label",helper:"clone",items:"> .panel",containment:"parent",placeholder:"panel-placeholder",update:function(){e.saveData()}})},setupOpenToggle:function(){this.panelcontainer.openToggle({target:".panel",button:".open-toggle-button",handle:".panel-header",callback:function(){e.saveData()}})},setupHelpBoxes:function(){var b=a(".panel:has(.help)",this.panelcontainer);b.each(function(){a(".label",this).append("<a class='help-label'>?</a>")}),a(".help-label",this.panelcontainer).click(function(b){b.preventDefault();var c=a(this).parents(".panel"),d=a(".help",this.parentNode.parentNode.parentNode);return c.hasClass("closed")?(c.removeClass("closed").addClass("open"),d.show()):d.toggle(),!1})},setupContextMenu:function(){this.panelcontainer.attr("contextmenu","wtaiu-context-menu"),a("#wtaiu-context-menu .open-all").click(function(){e.panelcontainer.find("> .panel").each(function(){a(this).removeClass("closed").addClass("open")}),e.saveData()}),a("#wtaiu-context-menu .close-all").click(function(){e.panelcontainer.find("> .panel").each(function(){a(this).removeClass("open").addClass("closed")}),e.saveData()})},getData:function(){return this.data},saveData:function(){clearTimeout(this.timer),this.timer=setTimeout(this.sendAjax.bind(this),500);var b={};this.panelcontainer.find(">.panel").each(function(){var c=a(this),d=c.attr("id"),e=c.hasClass("open");b[d]=e?1:0}),this.data.panels=b},sendAjax:function(b){"undefined"==typeof b&&(b=!1);var c={action:"wtaiu_save_data",open:this.data.open?1:0,panels:this.data.panels};a.ajax({type:"POST",async:b,cache:!1,url:d.ajaxurl,data:c,dataType:"json",success:function(){}})},open:function(){this.root.removeClass("wtaiu-closed").addClass("wtaiu-open"),this.sidebar.addClass("open"),this.data.open=!0},close:function(){this.root.removeClass("wtaiu-open").addClass("wtaiu-closed"),this.sidebar.removeClass("open"),this.data.open=!1},killSidebar:function(){if(confirm(d.remove_sidebar_alert1+"\n\n"+d.remove_sidebar_alert2)){var b={action:"wtaiu_save_close_sidebar"};a.post(d.ajaxurl,b,function(){e.close(),setTimeout(function(){e.sidebar.remove(),e.root.removeClass("transition-padding wtaiu-closed"),a("#wpadminbar").removeClass("transition-right"),e=null},250)},"json")}},isOpen:function(){return this.sidebar.hasClass("open")},addTransitions:function(){this.sidebar.addClass("transition-right"),this.handle.addClass("transition-all"),a("#wpadminbar").addClass("transition-right"),a("html").addClass("transition-padding")}};b.wtaiu_sidebar=e,a(function(){e.init()})}(jQuery,window,document,window.wtaiu||{});
//# sourceMappingURL=main.min.map